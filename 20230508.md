# std_msgs의  자료형
|privitive Type|Serialization|C++|python2, python3|
|:---|:---|:---|:---|
|bool(1)|unsigned 8-bit ing|uint8_t(2)|bool|
|int8|signed 8-bit int|int8_t|int|
|uint8|unsigned 8-bit int|uint8_t|int(3)|
|int16|signed 16-bit int|int16_t|int|
|uint16|unsigned 16-bit int|uint16_t|int|
|int32|signed 32-bit int|int32_t|int|
|uint32|unsigned 32-bit int|uint32_t|int|
|int64|signed 64-bit int|int64_t|long, int|
|uint64|unsigned 64-bit int|uint64_t|long, int|
|float32|32-bit IEEE float|float|float|
|float64|64-bit IEEE float|double|float|
|string|ascii string (4)|std::string|str, bytes|
|time|secs/nsecs unsigned 32-bit ints|ros::Time|rospy.Time|
|duration|secs/nsecs signed 32-bit ints|ros::Duration|rospy.Duration|

# Array handling 리스트 형태
|Arrya Type|Serialization|c++|python2, Python3|
|:---|:---|:---|:---|
|fixed-length|no extra serialization|0.11+: boost::array<T, length>, otherwise: std::vector<T>|tuple(1)|
|variable-length|uint32 length prefix|std::vector<T>|tuple(1)|
|uint8[]|see above|as above|str, bytes(2)|
|bool[]|see above|std::vector<uint8_t>|list of bool|


# TOPIC 통신 세번째 프로젝트

###CPP
> 1. catkin_create_pkg topic_third roscpp rospy std_msgs로 패키지 생성
> 2. 이후 vscode에서 실행
> 3. topic_third -> src -> third_pub.cpp 생성

```cpp
#include "ros/ros.h"
#include "std_msgs/Int32MultiArray.h"

int main(int argc, char** argv){
    ros::init(argc, argv, "third_pub");
    ros::NodeHandle nh;

    ros::Publisher pub = nh.advertise<std_msgs::Int32MultiArray>("multi_array", 100);

    ros::Rate loop_rate(1);

    std_msgs::Int32MultiArray msg;
    msg.data.push_back(0); // '0'을 한개씩 입력받는 리스트 형태

    while (ros::ok()){
        pub.publish(msg);
        loop_rate.sleep();
        msg.data.push_back(0);
    }

    return 0;
}
```

> 4. third_sub.cpp 생성

```cpp
#include "ros/ros.h"
#include "std_msgs/Int32MultiArray.h"

void msgCallback(const std_msgs::Int32MultiArray::ConstPtr& msg){
    std::vector<int32_t> v = msg->data; // 리스트 형태의 데이터를 받아온다.
    for (int i = 0; i < v.size(); i++){
        std::cout << v[i] << " ";
    }
    std::cout << std::endl;
}

int main(int argc, char** argv){
    ros::init(argc, argv, "third_sub");
    ros::NodeHandle nh;

    ros::Subscriber sub = nh.subscribe("multi_array", 100, msgCallback);

    ros::spin();

    return 0;
}
```

> 5. CMakeLists.txt에 build를 수정
> 6. executable, dependencies, libraries 3곳을 수정이후, 터미널에서 'cm'으로 빌드후 실행

----------------------------------------------------------------

###Python
> 1. topic_third에  scripts 파일을 생성
> 2. py_third_pub.py를 생성

```python
#!/usr/bin/python
#!-*- coding: utf-8 -*-

import rospy
from std_msgs.msg import Int32MultiArray

if __name__ == "__main__":
    rospy.init_node("py_third_pub")
    pub = rospy.Publisher("multi_array", Int32MultiArray, queue_size=100)
    loop_rate = rospy.Rate(1)

    msg = Int32MultiArray()
    msg.data.append(0)

    while not rospy.is_shutdown():
        pub.publish(msg)
        msg.data.append(0)
        loop_rate.sleep()
```

> 3. py_third_sub.py를 생성

```python

```

> 4. CMakeLists.txt 












